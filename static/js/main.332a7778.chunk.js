(this["webpackJsonpgoit-react-hw-07-phonebook"]=this["webpackJsonpgoit-react-hw-07-phonebook"]||[]).push([[0],{10:function(t,e,n){"use strict";n.d(e,"i",(function(){return c})),n.d(e,"j",(function(){return a})),n.d(e,"h",(function(){return o})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return s})),n.d(e,"a",(function(){return i})),n.d(e,"f",(function(){return b})),n.d(e,"g",(function(){return l})),n.d(e,"e",(function(){return j})),n.d(e,"d",(function(){return d}));var r=n(2),c=Object(r.b)("contacts/fetchContactsRequest"),a=Object(r.b)("contacts/fetchContactsSuccess"),o=Object(r.b)("contacts/fetchContactsError"),u=Object(r.b)("contacts/addContactsRequest"),s=Object(r.b)("contacts/addContactsSuccess"),i=Object(r.b)("contacts/addContactsError"),b=Object(r.b)("contacts/deleteContactsRequest"),l=Object(r.b)("contacts/deleteContactsSuccess"),j=Object(r.b)("contacts/deleteContactsError"),d=Object(r.b)("contacts/filter")},15:function(t,e,n){"use strict";n.d(e,"a",(function(){return l})),n.d(e,"b",(function(){return j.a}));var r=n(4),c=(n(26),n(18)),a=n.n(c),o=n(23),u=n(20),s=n.n(u);s.a.defaults.baseURL="https://connections-api.herokuapp.com";var i=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},b=function(){s.a.defaults.headers.common.Authorization=""},l={register:function(t){return function(){var e=Object(o.a)(a.a.mark((function e(n){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(r.a.registerRequest()),e.prev=1,e.next=4,s.a.post("/users/signup",t);case 4:c=e.sent,console.log(c.data),i(c.data.token),n(r.a.registerSuccess(c.data)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),n(r.a.registerError(e.t0.message));case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}()},logOut:function(){return function(){var t=Object(o.a)(a.a.mark((function t(e){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(r.a.logoutRequest()),t.prev=1,t.next=4,s.a.post("/users/logout");case 4:b(),e(r.a.logoutSuccess()),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e(r.a.logoutError(t.t0.message));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},logIn:function(t){return function(){var e=Object(o.a)(a.a.mark((function e(n){var c;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(r.a.loginRequest()),e.prev=1,e.next=4,s.a.post("/users/login",t);case 4:c=e.sent,i(c.data.token),n(r.a.loginSuccess(c.data)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),n(r.a.loginError(e.t0.message));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},getCurrentUser:function(){return function(){var t=Object(o.a)(a.a.mark((function t(e,n){var c,o,u;return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(c=n(),o=c.auth.token){t.next=3;break}return t.abrupt("return");case 3:return i(o),e(r.a.getCurrentUserRequest()),t.prev=5,t.next=8,s.a.get("/users/current");case 8:u=t.sent,e(r.a.getCurrentUserSuccess(u.data)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(5),e(r.a.getCurrentUserError(t.t0.message));case 15:case"end":return t.stop()}}),t,null,[[5,12]])})));return function(e,n){return t.apply(this,arguments)}}()}},j=n(27)},26:function(t,e,n){"use strict";var r,c,a,o,u=n(3),s=n(7),i=n(2),b=n(4),l={name:null,email:null},j=Object(i.c)(l,(r={},Object(u.a)(r,b.a.registerSuccess,(function(t,e){return e.payload.user})),Object(u.a)(r,b.a.loginSuccess,(function(t,e){return e.payload.user})),Object(u.a)(r,b.a.logoutSuccess,(function(){return l})),Object(u.a)(r,b.a.getCurrentUserSuccess,(function(t,e){return e.payload})),r)),d=Object(i.c)(null,(c={},Object(u.a)(c,b.a.registerSuccess,(function(t,e){return e.payload.token})),Object(u.a)(c,b.a.loginSuccess,(function(t,e){return e.payload.token})),Object(u.a)(c,b.a.logoutSuccess,(function(){return null})),c)),O=function(t,e){return e.payload},f=Object(i.c)(null,(a={},Object(u.a)(a,b.a.registerError,O),Object(u.a)(a,b.a.loginSuccess,O),Object(u.a)(a,b.a.logoutSuccess,O),Object(u.a)(a,b.a.getCurrentUserError,O),a)),g=Object(i.c)(!1,(o={},Object(u.a)(o,b.a.registerSuccess,(function(){return!0})),Object(u.a)(o,b.a.loginSuccess,(function(){return!0})),Object(u.a)(o,b.a.getCurrentUserSuccess,(function(){return!0})),Object(u.a)(o,b.a.registerError,(function(){return!1})),Object(u.a)(o,b.a.loginError,(function(){return!1})),Object(u.a)(o,b.a.getCurrentUserError,(function(){return!1})),Object(u.a)(o,b.a.logoutSuccess,(function(){return!1})),o));e.a=Object(s.b)({user:j,isAuthenticated:g,token:d,error:f})},27:function(t,e,n){"use strict";e.a={getIsAuthenticated:function(t){return t.auth.isAuthenticated},getUsername:function(t){return t.auth.user.name}}},4:function(t,e,n){"use strict";var r=n(2),c=Object(r.b)("auth/registerRequest"),a=Object(r.b)("auth/registerSuccess"),o=Object(r.b)("auth/registerError"),u=Object(r.b)("auth/loginRequest"),s=Object(r.b)("auth/loginSuccess"),i=Object(r.b)("auth/loginError"),b=Object(r.b)("auth/logoutRequest"),l=Object(r.b)("auth/logoutSuccess"),j=Object(r.b)("auth/logoutError"),d=Object(r.b)("auth/getCurrentUserRequest"),O=Object(r.b)("auth/getCurrentUserSuccess"),f=Object(r.b)("auth/getCurrentUserError");e.a={registerRequest:c,registerSuccess:a,registerError:o,logoutRequest:b,logoutSuccess:l,logoutError:j,loginRequest:u,loginSuccess:s,loginError:i,getCurrentUserRequest:d,getCurrentUserSuccess:O,getCurrentUserError:f}},86:function(t,e,n){},87:function(t,e,n){"use strict";n.r(e);var r,c,a=n(0),o=n.n(a),u=n(24),s=n.n(u),i=n(34),b=n(35),l=n(37),j=n(36),d=n(6),O=n(9),f=n(16),g=n(15),h=n(1),p={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},x=Object(O.b)((function(t){return{isAuthenticated:g.b.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(h.jsxs)("nav",{children:[Object(h.jsx)(f.b,{to:"/",exact:!0,style:p.link,activeStyle:p.activeLink,children:"Home"}),e&&Object(h.jsx)(f.b,{to:"/contacts",exact:!0,style:p.link,activeStyle:p.activeLink,children:"Contacts"})]})})),v={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:700,color:"#2A363B"},activeLink:{color:"#E84A5F"}},m=function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)(f.b,{to:"/register",exact:!0,style:v.link,activeStyle:v.activeLink,children:"Register"}),Object(h.jsx)(f.b,{to:"/login",exact:!0,style:v.link,activeStyle:v.activeLink,children:"Login"})]})},y=n.p+"static/media/default-avatar.e44fc4e2.png",k={container:{display:"flex",alignItems:"center"},avatar:{marginRight:4},name:{fontWeight:700,marginRight:12}},S={onLogout:g.a.logOut},C=Object(O.b)((function(t){return{name:g.b.getUsername(t),avatar:y}}),S)((function(t){var e=t.avatar,n=t.name,r=t.onLogout;return Object(h.jsxs)("div",{style:k.container,children:[Object(h.jsx)("img",{src:e,alt:"",width:"32",style:k.avatar}),Object(h.jsxs)("span",{style:k.name,children:["Welcome, ",n]}),Object(h.jsx)("button",{type:"button",onClick:r,children:"Logout"})]})})),A=n(27),E={header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #2A363B"}},U=Object(O.b)((function(t){return{isAuthenticated:A.a.getIsAuthenticated(t)}}))((function(t){var e=t.isAuthenticated;return Object(h.jsxs)("header",{style:E.header,children:[Object(h.jsx)(x,{}),e?Object(h.jsx)(C,{}):Object(h.jsx)(m,{})]})})),R=n(17),w=n(28),q=Object(O.b)((function(t){return{isAuthenticated:g.b.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(w.a)(t,["component","isAuthenticated","redirectTo"]);return Object(h.jsx)(d.b,Object(R.a)(Object(R.a)({},c),{},{render:function(t){return n?Object(h.jsx)(e,Object(R.a)({},t)):Object(h.jsx)(d.a,{to:r})}}))})),L=Object(O.b)((function(t){return{isAuthenticated:g.b.getIsAuthenticated(t)}}))((function(t){var e=t.component,n=t.isAuthenticated,r=t.redirectTo,c=Object(w.a)(t,["component","isAuthenticated","redirectTo"]);return Object(h.jsx)(d.b,Object(R.a)(Object(R.a)({},c),{},{render:function(t){return n&&c.restricted?Object(h.jsx)(d.a,{to:r}):Object(h.jsx)(e,Object(R.a)({},t))}}))})),I=Object(a.lazy)((function(){return n.e(4).then(n.bind(null,90))})),T=Object(a.lazy)((function(){return n.e(6).then(n.bind(null,91))})),z=Object(a.lazy)((function(){return n.e(5).then(n.bind(null,92))})),B=Object(a.lazy)((function(){return n.e(3).then(n.bind(null,93))})),W=function(t){Object(l.a)(n,t);var e=Object(j.a)(n);function n(){var t;Object(i.a)(this,n);for(var r=arguments.length,c=new Array(r),a=0;a<r;a++)c[a]=arguments[a];return(t=e.call.apply(e,[this].concat(c))).state={},t}return Object(b.a)(n,[{key:"componentDidMount",value:function(){this.props.onGetCurretnUser()}},{key:"render",value:function(){return Object(h.jsxs)("div",{children:[Object(h.jsx)(U,{}),Object(h.jsx)(a.Suspense,{fallback:Object(h.jsx)("p",{children:"Loading..."}),children:Object(h.jsxs)(d.d,{children:[Object(h.jsx)(L,{exact:!0,path:"/",component:I}),Object(h.jsx)(L,{path:"/register",restricted:!0,redirectTo:"/contacts",component:T}),Object(h.jsx)(L,{path:"/login",restricted:!0,redirectTo:"/contacts",component:z}),Object(h.jsx)(q,{path:"/contacts",redirectTo:"/login",component:B})]})})]})}}]),n}(a.Component),D={onGetCurretnUser:g.a.getCurrentUser},F=Object(O.b)(null,D)(W),G=n(29),J=n(2),M=n(7),H=n(48),K=n.n(H),N=n(19),P=n(49),Q=n.n(P),V=n(3),X=n(10),Y=Object(J.c)([],(r={},Object(V.a)(r,X.j,(function(t,e){return e.payload})),Object(V.a)(r,X.c,(function(t,e){return[].concat(Object(G.a)(t),[e.payload])})),Object(V.a)(r,X.g,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),r)),Z=Object(J.c)("",Object(V.a)({},X.d,(function(t,e){return e.payload}))),$=Object(J.c)(!1,(c={},Object(V.a)(c,X.i,(function(){return!0})),Object(V.a)(c,X.j,(function(){return!1})),Object(V.a)(c,X.h,(function(){return!1})),Object(V.a)(c,X.b,(function(){return!0})),Object(V.a)(c,X.c,(function(){return!1})),Object(V.a)(c,X.a,(function(){return!1})),Object(V.a)(c,X.f,(function(){return!0})),Object(V.a)(c,X.g,(function(){return!1})),Object(V.a)(c,X.e,(function(){return!1})),c)),_=Object(J.c)(null,{}),tt=Object(M.b)({items:Y,filter:Z,loading:$,error:_}),et=n(26),nt=[].concat(Object(G.a)(Object(J.d)({serializableCheck:{ignoredActions:[N.a,N.f,N.b,N.c,N.d,N.e]}})),[K.a]),rt={key:"auth",storage:Q.a,whitelist:["token"]},ct=Object(M.b)({contacts:tt,auth:Object(N.g)(rt,et.a)}),at=Object(J.a)({reducer:ct,middleware:nt,devTools:!1}),ot={store:at,persistor:Object(N.h)(at)},ut=n(50);n(85),n(86);s.a.render(Object(h.jsx)(o.a.StrictMode,{children:Object(h.jsx)(O.a,{store:ot.store,children:Object(h.jsx)(ut.a,{loading:null,persistor:ot.persistor,children:Object(h.jsx)(f.a,{children:Object(h.jsx)(F,{})})})})}),document.getElementById("root"))}},[[87,1,2]]]);
//# sourceMappingURL=main.332a7778.chunk.js.map